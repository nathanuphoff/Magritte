"use strict";function createPropertyHandlers(e){var t=defineProperty({},methodsKey,{});return function(e){var n,r=assign(t[methodsKey],e),o=new RegExp("^"+_Object$1.keys(r).join("|"));return assign(t,(n={},defineProperty(n,methodsKey,r),defineProperty(n,patternKey,o),n))}}function freezeModelToState(e){var t={};for(var n in e){var r=e[n];t[n]=("undefined"==typeof r?"undefined":_typeof(r))==functionType?r.next:freezeModelToState(r)}return freeze(t)}function isContent(e){return e===_null||("undefined"==typeof e?"undefined":_typeof(e))==stringType||("undefined"==typeof e?"undefined":_typeof(e))==numberType&&!_isNaN(e)}function getStoreContentKind(e,t){return t="undefined"==typeof e?"undefined":_typeof(e),isContent(e)?t=contentKind:isArray(e)&&(t=arrayKind),t}function isBoolean(e){return("undefined"==typeof e?"undefined":_typeof(e))==booleanType}function isPlainObject(e){return("undefined"==typeof e?"undefined":_typeof(e))!=stringType&&"[object Object]"==e}function slice(e){return[].slice.call(e,0)}function toLowerCase(e){return e.toLowerCase(e)}function compose(){var e=slice(arguments);return function(){return e.concat(slice(arguments))}}function element(){return arguments}function route(){return function(e){return e}}function structure(e){return function(e){return function(t,n,r,o,i,u){return e(t,n,r,o,i,u)}}}function store(e,t,n){function r(t,u,a){var d={};if(isPlainObject(t)){for(var c in t){var f=a?a+"."+c:c;d[c]=r(t[c],d,f)}return d}var l=function(){var r=getStoreContentKind(t);if(r){var c=function(c){for(var f=performance.now(),l=d.next;("undefined"==typeof c?"undefined":_typeof(c))==functionType;)c=c(l);if(c===_null&&(c=d.null),c!==_undefined&&c!==l)if(testStoreContent[r](c)){var s=u[a];o=Date.now(),assign(s,{next:c,last:l,time:o}),assign(d,s),n=e({state:freezeModelToState(i),model:i},n),console.log(performance.now()-f)}else contentWarning({value:c,expected:r,received:getStoreContentKind(t),path:a})},f=function(e){return d.time===o};return assign(d,{next:t,last:_undefined,null:r==arrayKind?[]:t,time:o,path:a,kind:r,hasChanged:f}),{v:freeze(assign(c,d))}}contentWarning({value:t,expected:"content, boolean, or a list",received:getStoreContentKind(t),path:a})}();if("object"===("undefined"==typeof l?"undefined":_typeof(l)))return l.v}var o=void 0,i=r(t);return n=e({state:freezeModelToState(i),model:i},n),i}function contentWarning(e){var t=e.value,n=e.path,r=e.expected,o=e.received;console.warn("Value “"+t+"” provided to "+n+" is of the wrong kind:",{expected:r,received:o})}function resolveChild(e,t,n,r,o){for(n="undefined"==typeof e?"undefined":_typeof(e);n==functionType;)o=e.name,e=e(t),n="undefined"==typeof e?"undefined":_typeof(e);return n!=booleanType&&(e==_null?e=_null:n==stringType||n==numberType?n=contentKind:_typeof(e[0])==stringType&&(n=listKind)),[e,n,r,o]}function setAttribute(e,t,n,r){n==_null||n===!1?r?e.removeAttributeNS(r,t):e.removeAttribute(t):(n===!0&&(n=""),r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))}function createElement(e,t){return elementCache[e]=(elementCache[e]?elementCache[e]:t?_document.createElementNS(t,e):_document.createElement(e)).cloneNode(!1)}function renderContent(e,t,n,r){var o=!n.node||n.type,i=o?_document.createTextNode(t):n.node;return n&&n.type?e.replaceChild(i,n.node):o?e.appendChild(i):n.content!==t&&(i.nodeValue=t),{node:i,content:t}}function renderAttributes(e,t,n,r){n=n||emptyObject;for(var o in t){var i=t[o];if(i!==n[o])if(attributeHandlers.pattern.test(o)){var u=o.match(attributeHandlers.pattern)[0];attributeHandlers.methods[u](e,o,i)}else r?setAttribute(e,o,i):e[o]=i}return t}function renderElement(e,t,n,r,o,i){var u=n.node===e?_null:t[0];"svg"===u&&(i=svgNameSpace);for(var a=n.name!==o||n.type!==u,d=a?createElement(u,i):n.node,c=a?[u]:n.vdom,f={},l=t.length,s=!!u-1;++s<l;){var p=resolveChild(t[s],r),y=slicedToArray(p,4),m=y[0],v=y[1],b=y[2],g=y[3],_=c[s]||emptyObject;if(m===!0){var h=transformChild(_.vdom),C=slicedToArray(h,4);m=C[0],v=C[1],b=C[2],g=C[3]}if(v==contentKind)c[s]=renderContent(d,m,_,r);else if(v==listKind)c[s]=renderElement(d,m,_,r,g,i);else if(v==objectType)if(c[s]=_null,m==_null){var S=_.node;S&&d.removeChild(S)}else assign(f,m);else c[s]=_}if(assign(f,renderAttributes(d,f,n.attributes,i)),a)e.appendChild(d);else for(;s<c.length;){var A=c[s];A.node&&d.removeChild(A.node),s++}return c.length=l,a&&f.onmount&&(d.addEventListener("mount",f.onmount,!1),d.dispatchEvent(mount)),{node:d,type:u,vdom:c,name:o,attributes:f}}function factory(){var e=arguments;return function(t,n,r){var o=_document.querySelector(t);o.innerHTML="";var i=render(o,e);return store(i,n,r)}}var _Object$1=Object,_Array=Array,_document="undefined"!=typeof document?document:{},_isNaN=isNaN,functionType="function",booleanType="boolean",objectType="object",stringType="string",numberType="number",arrayKind="Array",contentKind="content",listKind="list",_undefined=void 0,_null=null,emptyObject={},w3Domain="http://www.w3.org/",svgNameSpace=w3Domain+"2000/svg",xlinkNameSpace=w3Domain+"1999/xlink",assign=_Object$1.assign,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},set=function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var u=Object.getPrototypeOf(t);null!==u&&e(u,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var a=i.set;void 0!==a&&a.call(o,r)}return r},slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),methodsKey="m",patternKey="p",freeze=_Object$1.freeze,isArray=_Array.isArray,_testStoreContent,testStoreContent=(_testStoreContent={},defineProperty(_testStoreContent,arrayKind,isArray),defineProperty(_testStoreContent,contentKind,isContent),defineProperty(_testStoreContent,booleanType,isBoolean),_testStoreContent),handleAttributes=createPropertyHandlers(/(?!)/),methods=Object.freeze({compose:compose,element:element,handleAttributes:handleAttributes,route:route,structure:structure}),attributeHandlers=handleAttributes({aria:function(e,t,n){t=toLowerCase(t.replace(/([a-z])([A-Z])/g,"$1-$2")),setAttribute(e,t,n)},data:function(e,t,n){t=toLowerCase(t[4])+t.substr(5),e.dataset[t]=n},on:function(e,t,n){function r(e){n(e)}e[t]=r},viewBox:setAttribute,xlink:function(e,t,n){t=toLowerCase(t.replace(/([a-z])([A-Z])/g,"$1:$2")),setAttribute(e,t,n,xlinkNameSpace)}}),elementCache={},mount=_document.createEvent("Event").initEvent("mount",!0,!0),render=function(e,t){return function(n,r){return renderElement(e,t,r||{node:e,type:null,vdom:[],attributes:{}},n)}},index=assign(factory,methods);module.exports=index;
