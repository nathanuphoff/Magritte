"use strict";function assign(){for(var e=arguments,t=e[0],n=e.length,r=0;++r<n;){var o=e[r];for(var i in o)t[i]=o[i]}return t}function createPropertyHandlers(e){var t={methods:{},pattern:e};return function(n){var r=assign(t.methods,n),o=Object.keys(r).join("|"),i=o?new RegExp("^"+o):e;return assign(t,{methods:r,pattern:i})}}function freezeModelToState(e){var t={};for(var n in e){var r=e[n];t[n]=("undefined"==typeof r?"undefined":_typeof(r))==functionType?r.next:freezeModelToState(r)}return freeze(t)}function isContent(e){return e===_null||("undefined"==typeof e?"undefined":_typeof(e))==stringType||("undefined"==typeof e?"undefined":_typeof(e))==numberType&&!_isNaN(e)}function getStoreContentKind(e,t){return t="undefined"==typeof e?"undefined":_typeof(e),isContent(e)?t=contentType:isArray(e)&&(t=ArrayType),t}function isBoolean(e){return("undefined"==typeof e?"undefined":_typeof(e))==booleanType}function isPlainObject(e){return("undefined"==typeof e?"undefined":_typeof(e))!=stringType&&"[object Object]"==e}function slice(e){return[].slice.call(e,0)}function toLowerCase(e){return e.toLowerCase(e)}function compose(){var e=slice(arguments);return function(){return e.concat(slice(arguments))}}function element(){return arguments}function route(){return function(e){return e}}function structure(e){return function(e){return function(t,n,r,o,i,u){return e(t,n,r,o,i,u)}}}function store(e,t,n){function r(t,u,a){var c={};if(isPlainObject(t)){for(var d in t){var f=a?a+"."+d:d;c[d]=r(t[d],c,f)}return c}var s=function(){var r=getStoreContentKind(t);if(r){var d=function(d){for(var f=performance.now(),s=c.next;("undefined"==typeof d?"undefined":_typeof(d))==functionType;)d=d(s);if(d===_null&&(d=c.initial),d!==_undefined&&d!==s)if(testStoreContent[r](d)){var l=u[a];o=Date.now(),assign(l,{next:d,last:s,time:o}),assign(c,l),n=e({state:freezeModelToState(i),model:i},n),console.log(performance.now()-f)}else contentWarning({value:d,expected:r,received:getStoreContentKind(t),path:a})},f=function(e){return c.time===o};return assign(c,{next:t,last:_undefined,initial:"Array"==r?slice(t):t,time:o,path:a,kind:r,hasChanged:f}),{v:assign(d,c)}}contentWarning({value:t,expected:"content, boolean, or a list",received:getContentKind(t),path:a})}();if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}var o=void 0,i=r(t);n=e({state:freezeModelToState(i),model:i},n)}function contentWarning(e){var t=e.value,n=e.path,r=e.expected,o=e.received;o=getStoreContentKind(t),console.warn("Value “"+t+"” provided to "+n+" is of the wrong kind:",{expected:r,received:o})}function resolveChild(e,t,n,r,o){for(n="undefined"==typeof e?"undefined":_typeof(e);n==functionType;)o=e.name,e=e(t),n="undefined"==typeof e?"undefined":_typeof(e);return n!=booleanType&&(e==_null?e=_null:contentTypes[n]||_typeof(e[0])!=stringType||(n=listType)),[e,n,r,o]}function setAttribute(e,t,n,r){n==_null||n===!1?r?e.removeAttributeNS(r,t):e.removeAttribute(t):(n===!0&&(n=""),r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))}function createElement(e,t){return elementCache[e]=(elementCache[e]?elementCache[e]:t?_document.createElementNS(t,e):_document.createElement(e)).cloneNode(!1)}function renderContent(e,t,n,r){var o=!n.node||n.type,i=o?document.createTextNode(t):n.node;return n&&n.type?e.replaceChild(i,n.node):o?e.appendChild(i):n.content!==t&&(i.nodeValue=t),{node:i,content:t}}function renderAttributes(e,t,n,r){n=n||emptyObject;for(var o in t){var i=t[o];if(i!==n[o])if(attributeHandlers.pattern.test(o)){var u=o.match(attributeHandlers.pattern)[0];attributeHandlers.methods[u](e,o,i)}else r?setAttribute(e,o,i):e[o]=i}return t}function renderElement(e,t,n,r,o,i){var u=n.node===e?_null:t[0];i=i||namespaces[u];for(var a=n.name!==o||n.type!==u,c=a?createElement(u,i):n.node,d=a?[u]:n.vdom,f={},s=t.length,l=!!u-1;++l<s;){var p=resolveChild(t[l],r),y=slicedToArray(p,4),v=y[0],m=y[1],b=y[2],g=y[3],_=d[l]||emptyObject;if(v===!0){var T=transformChild(_.vdom),h=slicedToArray(T,4);v=h[0],m=h[1],b=h[2],g=h[3]}if(contentTypes[m])d[l]=renderContent(c,v,_,r);else if(m==listType)d[l]=renderElement(c,v,_,r,g,i);else if(m==objectType)if(d[l]=_null,v==_null){var C=_.node;C&&c.removeChild(C)}else assign(f,v);else d[l]=_}if(assign(f,renderAttributes(c,f,n.attributes,i)),a)e.appendChild(c);else for(;l<d.length;){var A=d[l];A.node&&c.removeChild(A.node),l++}return d.length=s,a&&f.onmount&&(c.addEventListener("mount",f.onmount,!1),c.dispatchEvent(mount)),{node:c,type:u,vdom:d,name:o,attributes:f}}function factory(){var e=arguments;return function(t,n,r){var o=_document.querySelector(t);o.innerHTML="";var i=render(o,e);return store(i,n,r)}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(r)},set=function e(t,n,r,o){var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var u=Object.getPrototypeOf(t);null!==u&&e(u,n,r,o)}else if("value"in i&&i.writable)i.value=r;else{var a=i.set;void 0!==a&&a.call(o,r)}return r},slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_contentTypes,_Object=Object,_Array=Array,_document="undefined"!=typeof document?document:{},_isNaN=isNaN,functionType="function",booleanType="boolean",objectType="object",stringType="string",numberType="number",ArrayType="Array",listType="list",contentType="content",_undefined=void 0,_null=null,emptyObject={},contentTypes=(_contentTypes={},defineProperty(_contentTypes,stringType,1),defineProperty(_contentTypes,numberType,1),_contentTypes),namespaces={svg:"http://www.w3.org/2000/svg"},freeze=_Object.freeze,isArray=_Array.isArray,_testStoreContent,testStoreContent=(_testStoreContent={},defineProperty(_testStoreContent,ArrayType,isArray),defineProperty(_testStoreContent,contentType,isContent),defineProperty(_testStoreContent,booleanType,isBoolean),_testStoreContent),handleAttributes=createPropertyHandlers(/(?!)/),methods=Object.freeze({compose:compose,element:element,handleAttributes:handleAttributes,route:route,structure:structure}),attributeHandlers=handleAttributes({aria:function(e,t,n){t=toLowerCase(t.replace(/([a-z])([A-Z])/g,"$1-$2")),setAttribute(e,t,n)},data:function(e,t,n){t=toLowerCase(t[4])+t.substr(5),e.dataset[t]=n},viewBox:setAttribute,xlink:function(e,t,n){t=toLowerCase(t.replace(/([a-z])([A-Z])/g,"$1:$2")),setAttribute(e,t,n,"http://www.w3.org/1999/xlink")}}),elementCache={},mount=_document.createEvent("Event").initEvent("mount",!0,!0),render=function(e,t){return function(n,r){return renderElement(e,t,r||{node:e,type:null,vdom:[],attributes:{}},n)}},index=assign(factory,methods);module.exports=index;
